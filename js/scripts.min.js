"use strict";function s(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e){f.classList[e?"add":"remove"]("_fixed")}function o(e){e=!(!(0<arguments.length&&void 0!==e)||e)||f.classList.contains("_open"),f.classList[e?"remove":"add"]("_open")}function c(){var e,t;window.screen.width<=1201?(r(!1),w.addEventListener("click",o),f.addEventListener("click",function(e){!e.target.closest("[data-menu-exit]")||o(!1)})):(e=a.scrollTop,t=f.classList.contains("_fixed"),500<=e&&!t?r(!0):e<500&&t&&r(!1))}function l(t){return m.find(function(e){return e.id===t})}function u(e,t){if(!e)throw new Error("Такого элемента не существует");p&&p.id!==e.id&&p.classList.remove("_open"),e.classList[t?"add":"remove"]("_open"),p=t?e:void 0}function i(e){u(l(e),!0)}function d(){var e,t;setTimeout(function(){p||i("promo-modal-1")},1e3*(e=25,t=60,Math.random()*(t-e)+e)),m.forEach(function(e){e.addEventListener("click",function(e){!e.target.closest("[data-modal-close]")||u(p,!1)})}),a.addEventListener("click",function(e){e=e.target.closest("[data-open-modal]");!e||i(e.dataset.openModal)})}var p,a=document.querySelector("html"),f=document.querySelector(".header"),w=document.querySelector(".header__toggler"),m=(document.querySelectorAll("[data-menu-exit]"),s(document.querySelectorAll(".modal")));document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".offer__swiper-container.swiper-container")||null,t=document.querySelector(".services__swiper-container.swiper-container")||null,r=document.querySelector(".staff__swiper-container.swiper-container")||null,n=document.querySelector(".portfolio__swiper-container.swiper-container")||null,o=document.querySelector(".promo__swiper-container.swiper-container")||null;e&&new Swiper(".offer__swiper-container",{loop:!0,grabCursor:!0,navigation:{nextEl:".offer__swiper-button-next",prevEl:".offer__swiper-button-prev"},pagination:{el:".offer__swiper-pagination",type:"bullets",clickable:!0},autoplay:{delay:5e3}}),t&&new Swiper(".services__swiper-container",{loop:!1,grabCursor:!0,navigation:{nextEl:".services__swiper-button-next",prevEl:".services__swiper-button-prev"},pagination:{el:".services__swiper-pagination",type:"progressbar"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},899:{slidesPerView:2,spaceBetween:30},1023:{slidesPerView:3,spaceBetween:25}}}),o&&new Swiper(".promo__swiper-container",{loop:!0,spaceBetween:25,grabCursor:!0,centeredSlides:!0,navigation:{nextEl:".promo__swiper-button-next",prevEl:".promo__swiper-button-prev"},breakpoints:{1100:{slidesPerView:"auto",centeredSlides:!0}}}),r&&new Swiper(".staff__swiper-container",{loop:!1,slidesPerView:1,grabCursor:!0,autoHeight:!0,navigation:{nextEl:".staff__swiper-button-next",prevEl:".staff__swiper-button-prev"}}),n&&new Swiper(".portfolio__swiper-container",{loop:!0,spaceBetween:5,grabCursor:!0,breakpoints:{320:{slidesPerView:"auto",centeredSlides:!0},800:{slidesPerView:2},1100:{slidesPerView:"auto",centeredSlides:!0}}}),(document.getElementById("map")||null)&&ymaps.ready(function(){new ymaps.Map("map",{center:[55.787851,37.635028],zoom:18}).geoObjects.add(new ymaps.Placemark([55.788044,37.635187],{balloonContent:"Persona BIA. Проспект Мира, 70"},{preset:"islands#blueCircleDotIconWithCaption",iconColor:"red"}))});function i(e){e.preventDefault();try{var t=new FormData(function(e){e=document.getElementById(e);if(e)return e;throw new Error("Форма с таким id не найдена")}(e.target.id));fetch("./mail.php",{method:"POST",body:t}).then(function(e){return console.log(e)}),t="".concat(p&&p.id),u(l(t),!1),e.target.reset()}catch(e){throw e}}var a=s(document.querySelectorAll("form"));a.forEach(function(e){e.addEventListener("submit",i)}),c(),window.addEventListener("scroll",c),d()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZml4TWVudVRvZ2dsZXIiLCJzdGF0dXMiLCIkaGVhZGVyIiwiY2xhc3NMaXN0IiwibWVudVRvZ2dsZXIiLCJpc01lbnVPcGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY29udGFpbnMiLCJxdWVyeVNlbGVjdG9yIiwiJG1lbnVUb2dnbGVyIiwiZG9jdW1lbnQiLCIkZXhpdE1lbnVFbGVtcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfcmVmIiwidGFyZ2V0IiwiY2xvc2VzdCIsIkhUTUwiLCJ3aW5TY3JvbGwiLCJpc01lbnVGaXhlZCIsImNoZWNrTWVudVdpbmRvd1dpZHRoIiwiZmluZE1vZGFsQnlJZCIsImlkIiwibW9kYWxzIiwiZmluZCIsIm1vZGFsIiwibW9kYWxUb2dnbGVyIiwiJGVsIiwiRXJyb3IiLCIkb3Blbk1vZGFsIiwiZmluZE1vZGFsQnlDbGFzcyIsIm1pbiIsIm1heCIsIm9wZW5Nb2RhbCIsIk1hdGgiLCJmb3JFYWNoIiwiX3JlZjIiLCJfcmVmMyIsImdldFJhbmRvbU51bWJlciIsInRhcmdldENsb3Nlc3RCdXR0b24iLCJpbml0TW9kYWwiLCJkYXRhc2V0IiwicXVlcnlTZWxlY3RvckFsbCIsIl90b0NvbnN1bWFibGVBcnJheSIsIiRvZmZlclNsaWRlciIsImlzQ2xvc2VNb2RhbEVsZW0iLCIkc2VydmljZXNTbGlkZXIiLCIkc3RhZmZTbGlkZXIiLCIkcHJvdGZvbGlvU2xpZGVyIiwiJHByb21vU2xpZGVyIiwiaXNPcGVuTW9kYWxCdXR0b24iLCJTd2lwZXIiLCJsb29wIiwiZ3JhYkN1cnNvciIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJjbGlja2FibGUiLCJvZmZlclNsaWRlciIsImRlbGF5IiwiZWwiLCJ0eXBlIiwiYXV0b3BsYXkiLCJwYWdpbmF0aW9uIiwic2VydmljZXNTbGlkZXIiLCIzMjAiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwicHJldkVsIiwiMTAyMyIsImJyZWFrcG9pbnRzIiwicHJvbW9TbGlkZXIiLCJjZW50ZXJlZFNsaWRlcyIsImF1dG9IZWlnaHQiLCI4MDAiLCIxMTAwIiwiZ2V0RWxlbWVudEJ5SWQiLCJ5bWFwcyIsIk1hcCIsImNlbnRlciIsInpvb20iLCJnZW9PYmplY3RzIiwiYWRkIiwicmVhZHkiLCJpbml0IiwiYmFsbG9vbkNvbnRlbnQiLCJwcmVzZXQiLCJpY29uQ29sb3IiLCJzdWJtaXRGb3JtIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImZvcm0iLCJmb3JtcyIsImZpbmRGb3JtQnlJZCIsIm1ldGhvZCIsImJvZHkiLCJjb25jYXQiLCJlcnJvciIsIndpbmRvdyIsInNjcm9sbFRvcCJdLCJtYXBwaW5ncyI6InV2QkFPdUIsU0FBakJBLEVBQWlCQyxHQUNuQkMsRUFBUUMsVUFBVUYsRUFBUyxNQUFRLFVBQVUsVUFHN0IsU0FBZEcsRUFBYyxHQUNWQyxNQUQ2QixFQUFBQyxVQUFBQyxhQUFBQyxJQUFuQixJQUFBLElBQ1lOLEVBQVFDLFVBQVVNLFNBQVMsU0FDdkRQLEVBQVFDLFVBQVdFLEVBQXFCLFNBQVIsT0FBa0IsU0FWN0JLLFNBQW5CUixJQUNBUyxJQVFJTixFQUNFRixFQVROUSxPQUFBQSxPQUFlQyxPQUFTRixNQUN4QkcsR0FBaUJELEdBRWpCWixFQUFpQmMsaUJBQWpCZCxRQUFpQkMsR0FDbkJDLEVBQVFDLGlCQUFtQixRQUFRLFNBQUFZLElBQW5DQSxFQUFBQyxPQURKQyxRQUFBLHFCQWdCZ0NiLEdBQVksT0FYbENDLEVBQW1CYSxFQUFHaEIsVUFDcEJDLEVBQVdFLEVBQWFGLFVBQVFNLFNBQVUsVUFnQjdCLEtBQWJVLElBQXFCQyxFQWIzQkMsR0FBdUIsR0FDckJGLEVBQXVCLEtBQU1DLEdBQzdCcEIsR0FBQSxJQW1CUixTQUFBc0IsRUFBQUMsR0FjSSxPQURjQyxFQUFPQyxLQUFLLFNBQUFDLEdBQUssT0FBSUEsRUFBTUgsS0FBT0EsSUFTL0IsU0FBZkksRUFBZ0JDLEVBQUszQixH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QSxNQUFBLENBVUlDLE9BQVEsQ0FBQyxVQUFXLFdBQ3BCQyxLQUFNLEtBUGRDLFdBQVVDLElBQ05MLElBQU1NLE1BQU1DLFVBQ2YsQ0FBQSxVQUFBLFdBV1csQ0FUWkMsZUFBZ0Isa0NBRUYsQ0FDQUMsT0FBQSx1Q0FGVkMsVUFBQSxXQTJCTyxTQUZQQyxFQUVPQyxHQUNIQSxFQUFBQyxpQkFMUixJQWFRLElBQU1DLEVBQVcsSUFBSUMsU0FoQmRoRixTQUFBQSxHQUlMaUYsRUFBT2pGLFNBQVNnRSxlQUFlckQsR0FIekMsR0FBTXVFLEVBS0UsT0FBT0QsRUFGTEEsTUFBSSxJQUFHakYsTUFBU2dFLCtCQVlZbUIsQ0FBYU4sRUFBRXpFLE9BQU9PLEtBSHREbUUsTUFBQUEsYUFBRixDQU1RTSxPQUFRLE9BSlpDLEtBQUFOLElBQ01BLEtBQUFBLFNBQUFBLEdBQVcsT0FBSUMsUUFBU0csSUFBQUEsS0F2TmxDeEUsRUEwTmdCLEdBQUEyRSxPQURRcEUsR0FBQUEsRUFBQVAsSUEzTjVCSSxFQUFBTCxFQUFBQyxJQUFBLEdBNk5ZMEUsRUFBQUEsT0FBTU4sUUFGVSxNQUFwQlEsR0FHZ0IsTUFBQUEsR0F4QnZCLElBSUtMLEVBQUtsRCxFQUZQaEMsU0FBQStCLGlCQUFBLFNBMkJJbUQsRUFBQTFELFFBQUEsU0FBQXlELEdBQ0hBLEVBQUEvRSxpQkFBQSxTQUFBMEUsS0F6UURuRSxJQVNJK0UsT0FBTWpGLGlCQUFpQmtGLFNBQXZCaEYsR0E2UUpvQiIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgSFRNTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKVxyXG5cclxuLy8gLy8gLS0tINCR0JvQntCaINCT0JvQkNCS0J3QntCT0J4g0JzQldCd0K4gLS0tXHJcbmNvbnN0ICRoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJylcclxuY29uc3QgJG1lbnVUb2dnbGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fdG9nZ2xlcicpXHJcbmNvbnN0ICRleGl0TWVudUVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbWVudS1leGl0XScpXHJcblxyXG5jb25zdCBmaXhNZW51VG9nZ2xlciA9IHN0YXR1cyA9PiB7XHJcbiAgICAkaGVhZGVyLmNsYXNzTGlzdFtzdGF0dXMgPyAnYWRkJyA6ICdyZW1vdmUnXSgnX2ZpeGVkJylcclxufVxyXG5cclxuY29uc3QgbWVudVRvZ2dsZXIgPSAoc3RhdHVzID0gdHJ1ZSkgPT4ge1xyXG4gICAgY29uc3QgaXNNZW51T3BlbiA9IHN0YXR1cyA/ICRoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdfb3BlbicpIDogdHJ1ZVxyXG4gICAgJGhlYWRlci5jbGFzc0xpc3RbIWlzTWVudU9wZW4gPyAnYWRkJyA6ICdyZW1vdmUnXSgnX29wZW4nKVxyXG59XHJcblxyXG5jb25zdCBjaGVja01lbnVXaW5kb3dXaWR0aCA9ICgpID0+IHtcclxuICAgIGlmICh3aW5kb3cuc2NyZWVuLndpZHRoIDw9IDEyMDEpIHtcclxuICAgICAgICBmaXhNZW51VG9nZ2xlcihmYWxzZSlcclxuXHJcbiAgICAgICAgJG1lbnVUb2dnbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbWVudVRvZ2dsZXIpXHJcbiAgICAgICAgJGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICh7IHRhcmdldCB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTWVudUV4aXRFbGVtID0gISF0YXJnZXQuY2xvc2VzdCgnW2RhdGEtbWVudS1leGl0XScpXHJcbiAgICAgICAgICAgIGlmIChpc01lbnVFeGl0RWxlbSkgbWVudVRvZ2dsZXIoZmFsc2UpXHJcbiAgICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3Qgd2luU2Nyb2xsID0gSFRNTC5zY3JvbGxUb3BcclxuICAgICAgICBjb25zdCBpc01lbnVGaXhlZCA9ICRoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdfZml4ZWQnKVxyXG5cclxuICAgICAgICBpZiAod2luU2Nyb2xsID49IDUwMCAmJiAhaXNNZW51Rml4ZWQpIHtcclxuICAgICAgICAgICAgZml4TWVudVRvZ2dsZXIodHJ1ZSlcclxuICAgICAgICB9IGVsc2UgaWYgKHdpblNjcm9sbCA8IDUwMCAmJiBpc01lbnVGaXhlZCkge1xyXG4gICAgICAgICAgICBmaXhNZW51VG9nZ2xlcihmYWxzZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPXHJcbmNvbnN0IGluaXRNZW51T2JzZXJ2ZXIgPSAoKSA9PiB7XHJcbiAgICBjaGVja01lbnVXaW5kb3dXaWR0aCgpXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgY2hlY2tNZW51V2luZG93V2lkdGgpXHJcbn1cclxuXHJcbi8vIC8vXHJcbmNvbnN0ICRtb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwnKVxyXG5jb25zdCBtb2RhbHMgPSBbLi4uJG1vZGFsc11cclxuXHJcbmxldCAkb3Blbk1vZGFsXHJcblxyXG5jb25zdCBmaW5kTW9kYWxCeUlkID0gaWQgPT4ge1xyXG4gICAgY29uc3QgbW9kYWwgPSBtb2RhbHMuZmluZChtb2RhbCA9PiBtb2RhbC5pZCA9PT0gaWQpXHJcbiAgICByZXR1cm4gbW9kYWxcclxufVxyXG5cclxuY29uc3QgZmluZE1vZGFsQnlDbGFzcyA9IGNsYXNzTmFtZSA9PiB7XHJcbiAgICBjb25zdCBtb2RhbCA9IG1vZGFscy5maW5kKG1vZGFsID0+IG1vZGFsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKVxyXG4gICAgcmV0dXJuIG1vZGFsXHJcbn1cclxuXHJcbmNvbnN0IG1vZGFsVG9nZ2xlciA9ICgkZWwsIHN0YXR1cykgPT4ge1xyXG4gICAgaWYgKCEkZWwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9Ci0LDQutC+0LPQviDRjdC70LXQvNC10L3RgtCwINC90LUg0YHRg9GJ0LXRgdGC0LLRg9C10YInKVxyXG4gICAgfVxyXG4gICAgaWYgKCRvcGVuTW9kYWwgJiYgJG9wZW5Nb2RhbC5pZCAhPT0gJGVsLmlkKSB7XHJcbiAgICAgICAgJG9wZW5Nb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdfb3BlbicpXHJcbiAgICB9XHJcblxyXG4gICAgJGVsLmNsYXNzTGlzdFtzdGF0dXMgPyAnYWRkJyA6ICdyZW1vdmUnXSgnX29wZW4nKVxyXG4gICAgJG9wZW5Nb2RhbCA9IHN0YXR1cyA/ICRlbCA6IHVuZGVmaW5lZFxyXG59XHJcblxyXG5jb25zdCBvcGVuTW9kYWwgPSBpZCA9PiB7XHJcbiAgICBtb2RhbFRvZ2dsZXIoZmluZE1vZGFsQnlJZChpZCksIHRydWUpXHJcbn1cclxuXHJcbmNvbnN0IGNsb3NlTW9kYWwgPSBpZCA9PiB7XHJcbiAgICBtb2RhbFRvZ2dsZXIoZmluZE1vZGFsQnlJZChpZCksIGZhbHNlKVxyXG59XHJcblxyXG5jb25zdCBnZXRSYW5kb21OdW1iZXIgPSAobWluLCBtYXgpID0+IHtcclxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW5cclxufVxyXG5cclxuY29uc3QgaW5pdE1vZGFsID0gKCkgPT4ge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCEkb3Blbk1vZGFsKSB7XHJcbiAgICAgICAgICAgIG9wZW5Nb2RhbCgncHJvbW8tbW9kYWwtMScpXHJcbiAgICAgICAgfVxyXG4gICAgfSwgZ2V0UmFuZG9tTnVtYmVyKDI1LCA2MCkgKiAxMDAwKVxyXG5cclxuICAgIG1vZGFscy5mb3JFYWNoKG1vZGFsID0+IHtcclxuICAgICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICh7IHRhcmdldCB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzQ2xvc2VNb2RhbEVsZW0gPSAhIXRhcmdldC5jbG9zZXN0KCdbZGF0YS1tb2RhbC1jbG9zZV0nKVxyXG4gICAgICAgICAgICBpZiAoIWlzQ2xvc2VNb2RhbEVsZW0pIHJldHVyblxyXG4gICAgICAgICAgICBtb2RhbFRvZ2dsZXIoJG9wZW5Nb2RhbCwgZmFsc2UpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgSFRNTC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICh7IHRhcmdldCB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0Q2xvc2VzdEJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCdbZGF0YS1vcGVuLW1vZGFsXScpXHJcbiAgICAgICAgY29uc3QgaXNPcGVuTW9kYWxCdXR0b24gPSAhIXRhcmdldENsb3Nlc3RCdXR0b25cclxuXHJcbiAgICAgICAgaWYgKGlzT3Blbk1vZGFsQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIG9wZW5Nb2RhbCh0YXJnZXRDbG9zZXN0QnV0dG9uLmRhdGFzZXQub3Blbk1vZGFsKVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gICAgLy8gLy9cclxuY29uc3QgJG9mZmVyU2xpZGVyID1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vZmZlcl9fc3dpcGVyLWNvbnRhaW5lci5zd2lwZXItY29udGFpbmVyJykgfHwgbnVsbFxyXG5jb25zdCAkc2VydmljZXNTbGlkZXIgPVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2VzX19zd2lwZXItY29udGFpbmVyLnN3aXBlci1jb250YWluZXInKSB8fFxyXG4gICAgbnVsbFxyXG5jb25zdCAkc3RhZmZTbGlkZXIgPVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YWZmX19zd2lwZXItY29udGFpbmVyLnN3aXBlci1jb250YWluZXInKSB8fCBudWxsXHJcbmNvbnN0ICRwcm90Zm9saW9TbGlkZXIgPVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcnRmb2xpb19fc3dpcGVyLWNvbnRhaW5lci5zd2lwZXItY29udGFpbmVyJykgfHxcclxuICAgIG51bGxcclxuY29uc3QgJHByb21vU2xpZGVyID1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9tb19fc3dpcGVyLWNvbnRhaW5lci5zd2lwZXItY29udGFpbmVyJykgfHwgbnVsbFxyXG5cclxuaWYgKCRvZmZlclNsaWRlcikge1xyXG4gICAgY29uc3Qgb2ZmZXJTbGlkZXIgPSBuZXcgU3dpcGVyKCcub2ZmZXJfX3N3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBncmFiQ3Vyc29yOiB0cnVlLFxyXG4gICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgbmV4dEVsOiAnLm9mZmVyX19zd2lwZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICAgICAgICBwcmV2RWw6ICcub2ZmZXJfX3N3aXBlci1idXR0b24tcHJldicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgIGVsOiAnLm9mZmVyX19zd2lwZXItcGFnaW5hdGlvbicsXHJcbiAgICAgICAgICAgIHR5cGU6ICdidWxsZXRzJyxcclxuICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXV0b3BsYXk6IHtcclxuICAgICAgICAgICAgZGVsYXk6IDUwMDAsXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmlmICgkc2VydmljZXNTbGlkZXIpIHtcclxuICAgIGNvbnN0IHNlcnZpY2VzU2xpZGVyID0gbmV3IFN3aXBlcignLnNlcnZpY2VzX19zd2lwZXItY29udGFpbmVyJywge1xyXG4gICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgIGdyYWJDdXJzb3I6IHRydWUsXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICBuZXh0RWw6ICcuc2VydmljZXNfX3N3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgICAgICAgICAgIHByZXZFbDogJy5zZXJ2aWNlc19fc3dpcGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgZWw6ICcuc2VydmljZXNfX3N3aXBlci1wYWdpbmF0aW9uJyxcclxuICAgICAgICAgICAgdHlwZTogJ3Byb2dyZXNzYmFyJyxcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICAzMjA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA4OTk6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxMDIzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxyXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfSlcclxufVxyXG5cclxuaWYgKCRwcm9tb1NsaWRlcikge1xyXG4gICAgY29uc3QgcHJvbW9TbGlkZXIgPSBuZXcgU3dpcGVyKCcucHJvbW9fX3N3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDI1LFxyXG4gICAgICAgIGdyYWJDdXJzb3I6IHRydWUsXHJcbiAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICBuZXh0RWw6ICcucHJvbW9fX3N3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgICAgICAgICAgIHByZXZFbDogJy5wcm9tb19fc3dpcGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgIDExMDA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59XHJcblxyXG5pZiAoJHN0YWZmU2xpZGVyKSB7XHJcbiAgICBjb25zdCBzdGFmZlNsaWRlciA9IG5ldyBTd2lwZXIoJy5zdGFmZl9fc3dpcGVyLWNvbnRhaW5lcicsIHtcclxuICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgIGdyYWJDdXJzb3I6IHRydWUsXHJcbiAgICAgICAgYXV0b0hlaWdodDogdHJ1ZSxcclxuICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgIG5leHRFbDogJy5zdGFmZl9fc3dpcGVyLWJ1dHRvbi1uZXh0JyxcclxuICAgICAgICAgICAgcHJldkVsOiAnLnN0YWZmX19zd2lwZXItYnV0dG9uLXByZXYnLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59XHJcblxyXG5pZiAoJHByb3Rmb2xpb1NsaWRlcikge1xyXG4gICAgY29uc3QgcHJvdGZvbGlvU2xpZGVyID0gbmV3IFN3aXBlcignLnBvcnRmb2xpb19fc3dpcGVyLWNvbnRhaW5lcicsIHtcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogNSxcclxuICAgICAgICBncmFiQ3Vyc29yOiB0cnVlLFxyXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgIDMyMDoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDgwMDoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTEwMDoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbn1cclxuXHJcbiAgICAvLyAvL1xyXG5cclxuY29uc3QgJG1hcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSB8fCBudWxsXHJcblxyXG5pZiAoJG1hcCkge1xyXG4gICAgeW1hcHMucmVhZHkoaW5pdClcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIGNvbnN0IG15TWFwID0gbmV3IHltYXBzLk1hcCgnbWFwJywge1xyXG4gICAgICAgIGNlbnRlcjogWzU1Ljc4Nzg1MSwgMzcuNjM1MDI4XSxcclxuICAgICAgICB6b29tOiAxOCxcclxuICAgIH0pXHJcblxyXG4gICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQoXHJcbiAgICAgICAgbmV3IHltYXBzLlBsYWNlbWFyayhcclxuICAgICAgICAgICAgWzU1Ljc4ODA0NCwgMzcuNjM1MTg3XSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYmFsbG9vbkNvbnRlbnQ6ICdQZXJzb25hIEJJQS4g0J/RgNC+0YHQv9C10LrRgiDQnNC40YDQsCwgNzAnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwcmVzZXQ6ICdpc2xhbmRzI2JsdWVDaXJjbGVEb3RJY29uV2l0aENhcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAncmVkJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApLFxyXG4gICAgKVxyXG59XHJcblxyXG4gICAgLy8gLy9cclxuY29uc3QgJGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXHJcbmNvbnN0IGZvcm1zID0gWy4uLiRmb3Jtc11cclxuXHJcbmNvbnN0IGZpbmRGb3JtQnlJZCA9IGlkID0+IHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcclxuICAgIGlmICghIWZvcm0pIHtcclxuICAgICAgICByZXR1cm4gZm9ybVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9Ck0L7RgNC80LAg0YEg0YLQsNC60LjQvCBpZCDQvdC1INC90LDQudC00LXQvdCwJylcclxuICAgIH1cclxufVxyXG5cclxuY29uc3Qgc3VibWl0Rm9ybSA9IGUgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmaW5kRm9ybUJ5SWQoZS50YXJnZXQuaWQpKVxyXG5cclxuICAgICAgICBmZXRjaCgnLi9tYWlsLnBocCcsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxyXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gY29uc29sZS5sb2cocmVzcG9uc2UpKVxyXG5cclxuICAgICAgICBjbG9zZU1vZGFsKGAkeyRvcGVuTW9kYWwgJiYgJG9wZW5Nb2RhbC5pZH1gKVxyXG4gICAgICAgIGUudGFyZ2V0LnJlc2V0KClcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgaW5pdEZvcm1zSGFkbGVyID0gKCkgPT4ge1xyXG4gICAgZm9ybXMuZm9yRWFjaChmb3JtID0+IHtcclxuICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5pbml0Rm9ybXNIYWRsZXIoKVxyXG5cclxuXHJcbiAgICBpbml0TWVudU9ic2VydmVyKClcclxuICAgIGluaXRNb2RhbCgpXHJcbn0pXHJcbiJdfQ==
