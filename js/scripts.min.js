"use strict";function s(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e){w.classList[e?"add":"remove"]("_fixed")}function o(e){e=!(!(0<arguments.length&&void 0!==e)||e)||w.classList.contains("_open"),w.classList[e?"remove":"add"]("_open")}function c(){var e,t;window.screen.width<=1201?(r(!1),f.addEventListener("click",o),w.addEventListener("click",function(e){!e.target.closest("[data-menu-exit]")||o(!1)})):(e=a.scrollTop,t=w.classList.contains("_fixed"),500<=e&&!t?r(!0):e<500&&t&&r(!1))}function l(t){return m.find(function(e){return e.id===t})}function u(e,t){if(!e)throw new Error("Такого элемента не существует");p&&p.id!==e.id&&p.classList.remove("_open"),e.classList[t?"add":"remove"]("_open"),p=t?e:void 0}function i(e){u(l(e),!0)}function d(){var e,t;setTimeout(function(){p||i("promo-modal-1")},1e3*(e=25,t=60,Math.random()*(t-e)+e)),m.forEach(function(e){e.addEventListener("click",function(e){!e.target.closest("[data-modal-close]")||u(p,!1)})}),a.addEventListener("click",function(e){e=e.target.closest("[data-open-modal]");!e||i(e.dataset.openModal)})}var p,a=document.querySelector("html"),w=document.querySelector(".header"),f=document.querySelector(".header__toggler"),m=(document.querySelectorAll("[data-menu-exit]"),s(document.querySelectorAll(".modal")));document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".offer__swiper-container.swiper-container")||null,t=document.querySelector(".services__swiper-container.swiper-container")||null,r=document.querySelector(".staff__swiper-container.swiper-container")||null,n=document.querySelector(".portfolio__swiper-container.swiper-container")||null,o=document.querySelector(".promo__swiper-container.swiper-container")||null;e&&new Swiper(".offer__swiper-container",{loop:!0,grabCursor:!0,navigation:{nextEl:".offer__swiper-button-next",prevEl:".offer__swiper-button-prev"},pagination:{el:".offer__swiper-pagination",type:"bullets",clickable:!0},autoplay:{delay:5e3}}),t&&new Swiper(".services__swiper-container",{loop:!1,grabCursor:!0,navigation:{nextEl:".services__swiper-button-next",prevEl:".services__swiper-button-prev"},pagination:{el:".services__swiper-pagination",type:"progressbar"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},899:{slidesPerView:2,spaceBetween:30},1023:{slidesPerView:3,spaceBetween:25}}}),o&&new Swiper(".promo__swiper-container",{loop:!0,grabCursor:!0,navigation:{nextEl:".promo__swiper-button-next",prevEl:".promo__swiper-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},769:{slidesPerView:2,spaceBetween:30},1050:{slidesPerView:3,spaceBetween:30},1369:{slidesPerView:4,spaceBetween:25}}}),r&&new Swiper(".staff__swiper-container",{loop:!1,slidesPerView:1,grabCursor:!0,autoHeight:!0,navigation:{nextEl:".staff__swiper-button-next",prevEl:".staff__swiper-button-prev"}}),n&&new Swiper(".portfolio__swiper-container",{loop:!0,spaceBetween:5,grabCursor:!0,breakpoints:{320:{slidesPerView:"auto",centeredSlides:!0},800:{slidesPerView:2,freeMode:!0},1100:{slidesPerView:"auto",centeredSlides:!0}}}),(document.getElementById("map")||null)&&ymaps.ready(function(){new ymaps.Map("map",{center:[55.787851,37.635028],zoom:18}).geoObjects.add(new ymaps.Placemark([55.787864,37.63519],{balloonContent:"Persona BIA. Проспект Мира, 70"},{preset:"islands#blueCircleDotIconWithCaption",iconColor:"red"}))});function i(e){e.preventDefault();try{var t=new FormData(function(e){e=document.getElementById(e);if(e)return e;throw new Error("Форма с таким id не найдена")}(e.target.id));fetch("./mail.php",{method:"POST",body:t}).then(function(e){return console.log(e)}),t="".concat(p&&p.id),u(l(t),!1),e.target.reset()}catch(e){throw e}}var a=s(document.querySelectorAll("form"));a.forEach(function(e){e.addEventListener("submit",i)}),c(),window.addEventListener("scroll",c),d()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZml4TWVudVRvZ2dsZXIiLCJzdGF0dXMiLCIkaGVhZGVyIiwiY2xhc3NMaXN0IiwibWVudVRvZ2dsZXIiLCJpc01lbnVPcGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY29udGFpbnMiLCJxdWVyeVNlbGVjdG9yIiwiJG1lbnVUb2dnbGVyIiwiZG9jdW1lbnQiLCIkZXhpdE1lbnVFbGVtcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfcmVmIiwidGFyZ2V0IiwiY2xvc2VzdCIsIkhUTUwiLCJ3aW5TY3JvbGwiLCJpc01lbnVGaXhlZCIsImNoZWNrTWVudVdpbmRvd1dpZHRoIiwiZmluZE1vZGFsQnlJZCIsImlkIiwibW9kYWxzIiwiZmluZCIsIm1vZGFsIiwibW9kYWxUb2dnbGVyIiwiJGVsIiwiRXJyb3IiLCIkb3Blbk1vZGFsIiwiZmluZE1vZGFsQnlDbGFzcyIsIm1pbiIsIm1heCIsIm9wZW5Nb2RhbCIsIk1hdGgiLCJmb3JFYWNoIiwiX3JlZjIiLCJfcmVmMyIsImdldFJhbmRvbU51bWJlciIsInRhcmdldENsb3Nlc3RCdXR0b24iLCJpbml0TW9kYWwiLCJkYXRhc2V0IiwicXVlcnlTZWxlY3RvckFsbCIsIl90b0NvbnN1bWFibGVBcnJheSIsIiRvZmZlclNsaWRlciIsImlzQ2xvc2VNb2RhbEVsZW0iLCIkc2VydmljZXNTbGlkZXIiLCIkc3RhZmZTbGlkZXIiLCIkcHJvdGZvbGlvU2xpZGVyIiwiJHByb21vU2xpZGVyIiwiaXNPcGVuTW9kYWxCdXR0b24iLCJTd2lwZXIiLCJsb29wIiwiZ3JhYkN1cnNvciIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJjbGlja2FibGUiLCJvZmZlclNsaWRlciIsImRlbGF5IiwiZWwiLCJ0eXBlIiwiYXV0b3BsYXkiLCJwYWdpbmF0aW9uIiwic2VydmljZXNTbGlkZXIiLCIzMjAiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwicHJldkVsIiwiMTAyMyIsImJyZWFrcG9pbnRzIiwiNzY5IiwiYXV0b0hlaWdodCIsImNlbnRlcmVkU2xpZGVzIiwiODAwIiwicHJvdGZvbGlvU2xpZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ5bWFwcyIsIk1hcCIsImNlbnRlciIsInpvb20iLCJnZW9PYmplY3RzIiwiYWRkIiwicmVhZHkiLCJpbml0IiwiYmFsbG9vbkNvbnRlbnQiLCJwcmVzZXQiLCJpY29uQ29sb3IiLCJzdWJtaXRGb3JtIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImZvcm0iLCJmb3JtcyIsImZpbmRGb3JtQnlJZCIsIm1ldGhvZCIsImJvZHkiLCJjb25jYXQiLCJlcnJvciIsIndpbmRvdyIsInNjcm9sbFRvcCJdLCJtYXBwaW5ncyI6InV2QkFPdUIsU0FBakJBLEVBQWlCQyxHQUNuQkMsRUFBUUMsVUFBVUYsRUFBUyxNQUFRLFVBQVUsVUFHN0IsU0FBZEcsRUFBYyxHQUNWQyxNQUQ2QixFQUFBQyxVQUFBQyxhQUFBQyxJQUFuQixJQUFBLElBQ1lOLEVBQVFDLFVBQVVNLFNBQVMsU0FDdkRQLEVBQVFDLFVBQVdFLEVBQXFCLFNBQVIsT0FBa0IsU0FWN0JLLFNBQW5CUixJQUNBUyxJQVFJTixFQUNFRixFQVROUSxPQUFBQSxPQUFlQyxPQUFTRixNQUN4QkcsR0FBaUJELEdBRWpCWixFQUFpQmMsaUJBQWpCZCxRQUFpQkMsR0FDbkJDLEVBQVFDLGlCQUFtQixRQUFRLFNBQUFZLElBQW5DQSxFQUFBQyxPQURKQyxRQUFBLHFCQWdCZ0NiLEdBQVksT0FYbENDLEVBQW1CYSxFQUFHaEIsVUFDcEJDLEVBQVdFLEVBQWFGLFVBQVFNLFNBQVUsVUFnQjdCLEtBQWJVLElBQXFCQyxFQWIzQkMsR0FBdUIsR0FDckJGLEVBQXVCLEtBQU1DLEdBQzdCcEIsR0FBQSxJQW1CUixTQUFBc0IsRUFBQUMsR0FjSSxPQURjQyxFQUFPQyxLQUFLLFNBQUFDLEdBQUssT0FBSUEsRUFBTUgsS0FBT0EsSUFTL0IsU0FBZkksRUFBZ0JDLEVBQUszQixHQWRyQnVCLElBQUFBLEVBZ0JFLE1BQU0sSUFBSUssTUFBTSxpQ0FFaEJDLEdBQWNBLEVBQVdQLEtBQU9LLEVBQUlMLElBZHRDRCxFQUFhbkIsVUFBYm1CLE9BQUFBLFNBQ0ZNLEVBQUF6QixVQUFBRixFQUFBLE1BQUEsVUFBQSxTQUNBNkIsRUFBQTdCLEVBQUEyQixPQUFBcEIsRUFHRXVCLFNBQUFBLEVBQUFBLEdBQ0ZKLEVBQWNILEVBQVlELElBQUFHLEdBUVosU0FBVkksSUFITSxJQUFBRSxFQUFBQyxFQUlOSCxXQUFXM0IsV0FDZDJCLEdBcUJPSSxFQUFVLGtCQWxCVTFCLEtBUmxCd0IsRUFRUyxHQVJUQyxFQVFTLEdBUFRFLEtBQUlOLFVBQU1JLEVBQUFELEdBQUFBLElBNkJwQlIsRUFBT1ksUUFBUSxTQUFBVixHQW5CYlEsRUFBU3BCLGlCQUFUb0IsUUFBa0IsU0FBQUcsSUFBQUEsRUFBQXJCLE9BQ3BCQyxRQUFBLHVCQXNCUVUsRUFBYUcsR0FBWSxPQUlqQ1osRUFBS0osaUJBQWlCLFFBQVMsU0FBQXdCLEdBbkI3QkMsRUFtQjZDRCxFQUFidEIsT0FuQmhDdUIsUUFBa0Isc0JBQ2JDLEdBR0xDLEVBQVlELEVBQU1FLFFBQUFSLGFBbkZ4QixJQWlDU0osRUFqQ0haLEVBQU9OLFNBQVNGLGNBQWMsUUFHOUJSLEVBQVVVLFNBQVNGLGNBQWMsV0FDakNDLEVBQWVDLFNBQVNGLGNBQWMsb0JBeUJwQ2MsR0F4QmVaLFNBQVMrQixpQkFBaUIsb0JBMEJsQ0MsRUFESDVDLFNBQWMyQyxpQkFBZCxZQTREUm5CLFNBQU9ZLGlCQUFRLG1CQUFTLFdBQzRCLElBQUFTLEVBQzVDakMsU0FBTWtDLGNBQWdCLDhDQUF0QixLQUNBQyxFQUNBcEIsU0FBQUEsY0FBYUcsaURBQ2hCLEtBTExrQixFQVFBOUIsU0FBS0osY0FBaUIsOENBQXlCLEtBQUFtQyxFQUMzQ3JDLFNBQU00QixjQUFtQixrREFDekIsS0FxQkZVLEVBbkJFdEMsU0FBSXVDLGNBQW1CLDhDQUFBLEtBRXRCTixHQU5MLElBQUFPLE9BQUEsMkJBQUEsQ0FmSkMsTUFBQSxFQTRDUUMsWUFBWSxFQWxCWkMsV0FBQ3pDLENBQ0wwQyxPQUFBLDZCQUNFWCxPQUFZLDhCQUtaRyxXQUFZLENBRVpDLEdBQUFBLDRCQUdBQyxLQUFZLFVBY05PLFdBQVcsR0FWYkMsU0FBQUEsQ0FDSUMsTUFEaUQsT0FHM0NaLEdBSUEsSUFBQUssT0FBQSw4QkFBQSxDQUNSUSxNQUFJLEVBQ0pDLFlBQU0sRUFDTkosV0FBVyxDQVZ3Q0QsT0FBQSxnQ0FZdkRNLE9BQVUsaUNBQUFDLFdBQUEsQ0FaZEgsR0FBQSwrQkFnQkhDLEtBQUEsZUFHU0csWUFBQUEsQ0FDSUMsSUFEdUQsQ0FFbkRDLGNBRm1ELEVBR25EQyxhQUFFLElBRVJDLElBQVEsQ0FMaURGLGNBQUEsRUFPbkRDLGFBQUUsSUFFSkUsS0FBRSxDQVRtREgsY0FBQSxFQVk3REksYUFBYSxPQU1MSixHQUNjLElBQUFkLE9BQUEsMkJBQUEsQ0FGYkMsTUFMSSxFQVNUQyxZQUFNLEVBQ0ZZLFdBQUFBLENBQ0FDLE9BQUFBLDZCQUZFQyxPQUFBLDhCQXJCZEUsWUFBQSxDQTJCSEwsSUFBQSxDQVllQyxjQUFlLEVBVjNCaEIsYUFBYyxJQUVKcUIsSUFEaUQsQ0FFN0NMLGNBRjZDLEVBRzdDQyxhQUFFLElBRVJDLEtBQVEsQ0FMMkNGLGNBQUEsRUFPdkRJLGFBQWEsSUFFTEosS0FBQUEsQ0FDQUMsY0FBYyxFQUhUQSxhQUFBLE9BVUxELEdBQ2MsSUFBQWQsT0FBQSwyQkFBQSxDQUZaQyxNQVRHLEVBYVRhLGNBQU0sRUFDRkEsWUFBQUEsRUFDQUMsWUFBQUEsRUFGRVosV0FBQSxDQWJHQyxPQUFBLDZCQVBqQlksT0FBQSxnQ0E4QklmLEdBRHVELElBQUFELE9BQUEsK0JBQUEsQ0FHdkRFLE1BQUFBLEVBQ0FrQixhQUp1RCxFQUt2RGpCLFlBQVksRUFDUkMsWUFBUSxDQUNSWSxJQUFRLENBRkFGLGNBQUEsT0FMaEJPLGdCQUFBLEdBc0JRQyxJQUFLLENBVmJ6QixjQUFrQixFQUNaMEIsVUFBa0IsR0FFcEJSLEtBQVksQ0FDRkQsY0FIcUQsT0FJL0RJLGdCQUFhLE9BQUExRCxTQUFBZ0UsZUFBQSxRQUFBLE9BV0xILE1BQUFBLE1BZnVELFdBcUJuRSxJQUFBSSxNQUFBQyxJQUFBLE1BQUEsQ0FVSUMsT0FBUSxDQUFDLFVBQVcsV0FDcEJDLEtBQU0sS0FQZEMsV0FBVUMsSUFDTkwsSUFBTU0sTUFBTUMsVUFDZixDQUFBLFVBQUEsVUFXVyxDQVRaQyxlQUFnQixrQ0FFRixDQUNBQyxPQUFBLHVDQUZWQyxVQUFBLFdBMkJPLFNBRlBDLEVBRU9DLEdBQ0hBLEVBQUFDLGlCQUxSLElBYVEsSUFBTUMsRUFBVyxJQUFJQyxTQWhCZGhGLFNBQUFBLEdBSUxpRixFQUFPakYsU0FBU2dFLGVBQWVyRCxHQUh6QyxHQUFNdUUsRUFLRSxPQUFPRCxFQUZMQSxNQUFJLElBQUdqRixNQUFTZ0UsK0JBWVltQixDQUFhTixFQUFFekUsT0FBT08sS0FIdERtRSxNQUFBQSxhQUFGLENBTVFNLE9BQVEsT0FKWkMsS0FBQU4sSUFDTUEsS0FBQUEsU0FBQUEsR0FBVyxPQUFJQyxRQUFTRyxJQUFBQSxLQWxPbEN4RSxFQXFPZ0IsR0FBQTJFLE9BRFFwRSxHQUFBQSxFQUFBUCxJQXRPNUJJLEVBQUFMLEVBQUFDLElBQUEsR0F3T1kwRSxFQUFBQSxPQUFNTixRQUZVLE1BQXBCUSxHQUdnQixNQUFBQSxHQXhCdkIsSUFJS0wsRUFBS2xELEVBRlBoQyxTQUFBK0IsaUJBQUEsU0EyQkltRCxFQUFBMUQsUUFBQSxTQUFBeUQsR0FDSEEsRUFBQS9FLGlCQUFBLFNBQUEwRSxLQXBSRG5FLElBU0krRSxPQUFNakYsaUJBQWlCa0YsU0FBdkJoRixHQXdSSm9CIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBIVE1MID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpXHJcblxyXG4vLyAvLyAtLS0g0JHQm9Ce0Jog0JPQm9CQ0JLQndCe0JPQniDQnNCV0J3QriAtLS1cclxuY29uc3QgJGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKVxyXG5jb25zdCAkbWVudVRvZ2dsZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX190b2dnbGVyJylcclxuY29uc3QgJGV4aXRNZW51RWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tZW51LWV4aXRdJylcclxuXHJcbmNvbnN0IGZpeE1lbnVUb2dnbGVyID0gc3RhdHVzID0+IHtcclxuICAgICRoZWFkZXIuY2xhc3NMaXN0W3N0YXR1cyA/ICdhZGQnIDogJ3JlbW92ZSddKCdfZml4ZWQnKVxyXG59XHJcblxyXG5jb25zdCBtZW51VG9nZ2xlciA9IChzdGF0dXMgPSB0cnVlKSA9PiB7XHJcbiAgICBjb25zdCBpc01lbnVPcGVuID0gc3RhdHVzID8gJGhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ19vcGVuJykgOiB0cnVlXHJcbiAgICAkaGVhZGVyLmNsYXNzTGlzdFshaXNNZW51T3BlbiA/ICdhZGQnIDogJ3JlbW92ZSddKCdfb3BlbicpXHJcbn1cclxuXHJcbmNvbnN0IGNoZWNrTWVudVdpbmRvd1dpZHRoID0gKCkgPT4ge1xyXG4gICAgaWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPD0gMTIwMSkge1xyXG4gICAgICAgIGZpeE1lbnVUb2dnbGVyKGZhbHNlKVxyXG5cclxuICAgICAgICAkbWVudVRvZ2dsZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBtZW51VG9nZ2xlcilcclxuICAgICAgICAkaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKHsgdGFyZ2V0IH0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXNNZW51RXhpdEVsZW0gPSAhIXRhcmdldC5jbG9zZXN0KCdbZGF0YS1tZW51LWV4aXRdJylcclxuICAgICAgICAgICAgaWYgKGlzTWVudUV4aXRFbGVtKSBtZW51VG9nZ2xlcihmYWxzZSlcclxuICAgICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB3aW5TY3JvbGwgPSBIVE1MLnNjcm9sbFRvcFxyXG4gICAgICAgIGNvbnN0IGlzTWVudUZpeGVkID0gJGhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ19maXhlZCcpXHJcblxyXG4gICAgICAgIGlmICh3aW5TY3JvbGwgPj0gNTAwICYmICFpc01lbnVGaXhlZCkge1xyXG4gICAgICAgICAgICBmaXhNZW51VG9nZ2xlcih0cnVlKVxyXG4gICAgICAgIH0gZWxzZSBpZiAod2luU2Nyb2xsIDwgNTAwICYmIGlzTWVudUZpeGVkKSB7XHJcbiAgICAgICAgICAgIGZpeE1lbnVUb2dnbGVyKGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y9cclxuY29uc3QgaW5pdE1lbnVPYnNlcnZlciA9ICgpID0+IHtcclxuICAgIGNoZWNrTWVudVdpbmRvd1dpZHRoKClcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjaGVja01lbnVXaW5kb3dXaWR0aClcclxufVxyXG5cclxuLy8gLy9cclxuY29uc3QgJG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbCcpXHJcbmNvbnN0IG1vZGFscyA9IFsuLi4kbW9kYWxzXVxyXG5cclxubGV0ICRvcGVuTW9kYWxcclxuXHJcbmNvbnN0IGZpbmRNb2RhbEJ5SWQgPSBpZCA9PiB7XHJcbiAgICBjb25zdCBtb2RhbCA9IG1vZGFscy5maW5kKG1vZGFsID0+IG1vZGFsLmlkID09PSBpZClcclxuICAgIHJldHVybiBtb2RhbFxyXG59XHJcblxyXG5jb25zdCBmaW5kTW9kYWxCeUNsYXNzID0gY2xhc3NOYW1lID0+IHtcclxuICAgIGNvbnN0IG1vZGFsID0gbW9kYWxzLmZpbmQobW9kYWwgPT4gbW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpXHJcbiAgICByZXR1cm4gbW9kYWxcclxufVxyXG5cclxuY29uc3QgbW9kYWxUb2dnbGVyID0gKCRlbCwgc3RhdHVzKSA9PiB7XHJcbiAgICBpZiAoISRlbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign0KLQsNC60L7Qs9C+INGN0LvQtdC80LXQvdGC0LAg0L3QtSDRgdGD0YnQtdGB0YLQstGD0LXRgicpXHJcbiAgICB9XHJcbiAgICBpZiAoJG9wZW5Nb2RhbCAmJiAkb3Blbk1vZGFsLmlkICE9PSAkZWwuaWQpIHtcclxuICAgICAgICAkb3Blbk1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ19vcGVuJylcclxuICAgIH1cclxuXHJcbiAgICAkZWwuY2xhc3NMaXN0W3N0YXR1cyA/ICdhZGQnIDogJ3JlbW92ZSddKCdfb3BlbicpXHJcbiAgICAkb3Blbk1vZGFsID0gc3RhdHVzID8gJGVsIDogdW5kZWZpbmVkXHJcbn1cclxuXHJcbmNvbnN0IG9wZW5Nb2RhbCA9IGlkID0+IHtcclxuICAgIG1vZGFsVG9nZ2xlcihmaW5kTW9kYWxCeUlkKGlkKSwgdHJ1ZSlcclxufVxyXG5cclxuY29uc3QgY2xvc2VNb2RhbCA9IGlkID0+IHtcclxuICAgIG1vZGFsVG9nZ2xlcihmaW5kTW9kYWxCeUlkKGlkKSwgZmFsc2UpXHJcbn1cclxuXHJcbmNvbnN0IGdldFJhbmRvbU51bWJlciA9IChtaW4sIG1heCkgPT4ge1xyXG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pblxyXG59XHJcblxyXG5jb25zdCBpbml0TW9kYWwgPSAoKSA9PiB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBpZiAoISRvcGVuTW9kYWwpIHtcclxuICAgICAgICAgICAgb3Blbk1vZGFsKCdwcm9tby1tb2RhbC0xJylcclxuICAgICAgICB9XHJcbiAgICB9LCBnZXRSYW5kb21OdW1iZXIoMjUsIDYwKSAqIDEwMDApXHJcblxyXG4gICAgbW9kYWxzLmZvckVhY2gobW9kYWwgPT4ge1xyXG4gICAgICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKHsgdGFyZ2V0IH0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXNDbG9zZU1vZGFsRWxlbSA9ICEhdGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLW1vZGFsLWNsb3NlXScpXHJcbiAgICAgICAgICAgIGlmICghaXNDbG9zZU1vZGFsRWxlbSkgcmV0dXJuXHJcbiAgICAgICAgICAgIG1vZGFsVG9nZ2xlcigkb3Blbk1vZGFsLCBmYWxzZSlcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBIVE1MLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKHsgdGFyZ2V0IH0pID0+IHtcclxuICAgICAgICBjb25zdCB0YXJnZXRDbG9zZXN0QnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLW9wZW4tbW9kYWxdJylcclxuICAgICAgICBjb25zdCBpc09wZW5Nb2RhbEJ1dHRvbiA9ICEhdGFyZ2V0Q2xvc2VzdEJ1dHRvblxyXG5cclxuICAgICAgICBpZiAoaXNPcGVuTW9kYWxCdXR0b24pIHtcclxuICAgICAgICAgICAgb3Blbk1vZGFsKHRhcmdldENsb3Nlc3RCdXR0b24uZGF0YXNldC5vcGVuTW9kYWwpXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcbiAgICAvLyAvL1xyXG5jb25zdCAkb2ZmZXJTbGlkZXIgPVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9mZmVyX19zd2lwZXItY29udGFpbmVyLnN3aXBlci1jb250YWluZXInKSB8fCBudWxsXHJcbmNvbnN0ICRzZXJ2aWNlc1NsaWRlciA9XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZXNfX3N3aXBlci1jb250YWluZXIuc3dpcGVyLWNvbnRhaW5lcicpIHx8XHJcbiAgICBudWxsXHJcbmNvbnN0ICRzdGFmZlNsaWRlciA9XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RhZmZfX3N3aXBlci1jb250YWluZXIuc3dpcGVyLWNvbnRhaW5lcicpIHx8IG51bGxcclxuY29uc3QgJHByb3Rmb2xpb1NsaWRlciA9XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9ydGZvbGlvX19zd2lwZXItY29udGFpbmVyLnN3aXBlci1jb250YWluZXInKSB8fFxyXG4gICAgbnVsbFxyXG5jb25zdCAkcHJvbW9TbGlkZXIgPVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb21vX19zd2lwZXItY29udGFpbmVyLnN3aXBlci1jb250YWluZXInKSB8fCBudWxsXHJcblxyXG5pZiAoJG9mZmVyU2xpZGVyKSB7XHJcbiAgICBjb25zdCBvZmZlclNsaWRlciA9IG5ldyBTd2lwZXIoJy5vZmZlcl9fc3dpcGVyLWNvbnRhaW5lcicsIHtcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIGdyYWJDdXJzb3I6IHRydWUsXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICBuZXh0RWw6ICcub2ZmZXJfX3N3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgICAgICAgICAgIHByZXZFbDogJy5vZmZlcl9fc3dpcGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgZWw6ICcub2ZmZXJfX3N3aXBlci1wYWdpbmF0aW9uJyxcclxuICAgICAgICAgICAgdHlwZTogJ2J1bGxldHMnLFxyXG4gICAgICAgICAgICBjbGlja2FibGU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhdXRvcGxheToge1xyXG4gICAgICAgICAgICBkZWxheTogNTAwMCxcclxuICAgICAgICB9LFxyXG4gICAgfSlcclxufVxyXG5cclxuaWYgKCRzZXJ2aWNlc1NsaWRlcikge1xyXG4gICAgY29uc3Qgc2VydmljZXNTbGlkZXIgPSBuZXcgU3dpcGVyKCcuc2VydmljZXNfX3N3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgZ3JhYkN1cnNvcjogdHJ1ZSxcclxuICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgIG5leHRFbDogJy5zZXJ2aWNlc19fc3dpcGVyLWJ1dHRvbi1uZXh0JyxcclxuICAgICAgICAgICAgcHJldkVsOiAnLnNlcnZpY2VzX19zd2lwZXItYnV0dG9uLXByZXYnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICBlbDogJy5zZXJ2aWNlc19fc3dpcGVyLXBhZ2luYXRpb24nLFxyXG4gICAgICAgICAgICB0eXBlOiAncHJvZ3Jlc3NiYXInLFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgIDMyMDoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDg5OToge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDEwMjM6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDI1LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59XHJcblxyXG5pZiAoJHByb21vU2xpZGVyKSB7XHJcbiAgICBjb25zdCBwcm9tb1NsaWRlciA9IG5ldyBTd2lwZXIoJy5wcm9tb19fc3dpcGVyLWNvbnRhaW5lcicsIHtcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIGdyYWJDdXJzb3I6IHRydWUsXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICBuZXh0RWw6ICcucHJvbW9fX3N3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgICAgICAgICAgIHByZXZFbDogJy5wcm9tb19fc3dpcGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgIDMyMDoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDc2OToge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDEwNTA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxMzY5OiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxyXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfSlcclxufVxyXG5cclxuaWYgKCRzdGFmZlNsaWRlcikge1xyXG4gICAgY29uc3Qgc3RhZmZTbGlkZXIgPSBuZXcgU3dpcGVyKCcuc3RhZmZfX3N3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICBncmFiQ3Vyc29yOiB0cnVlLFxyXG4gICAgICAgIGF1dG9IZWlnaHQ6IHRydWUsXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICBuZXh0RWw6ICcuc3RhZmZfX3N3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgICAgICAgICAgIHByZXZFbDogJy5zdGFmZl9fc3dpcGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgfSlcclxufVxyXG5cclxuaWYgKCRwcm90Zm9saW9TbGlkZXIpIHtcclxuICAgIGNvbnN0IHByb3Rmb2xpb1NsaWRlciA9IG5ldyBTd2lwZXIoJy5wb3J0Zm9saW9fX3N3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDUsXHJcbiAgICAgICAgZ3JhYkN1cnNvcjogdHJ1ZSxcclxuICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICAzMjA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA4MDA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgICAgICBmcmVlTW9kZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTEwMDoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbn1cclxuXHJcbiAgICAvLyAvL1xyXG5cclxuY29uc3QgJG1hcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSB8fCBudWxsXHJcblxyXG5pZiAoJG1hcCkge1xyXG4gICAgeW1hcHMucmVhZHkoaW5pdClcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIGNvbnN0IG15TWFwID0gbmV3IHltYXBzLk1hcCgnbWFwJywge1xyXG4gICAgICAgIGNlbnRlcjogWzU1Ljc4Nzg1MSwgMzcuNjM1MDI4XSxcclxuICAgICAgICB6b29tOiAxOCxcclxuICAgIH0pXHJcblxyXG4gICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQoXHJcbiAgICAgICAgbmV3IHltYXBzLlBsYWNlbWFyayhcclxuICAgICAgICAgICAgWzU1Ljc4Nzg2NCwgMzcuNjM1MTldLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBiYWxsb29uQ29udGVudDogJ1BlcnNvbmEgQklBLiDQn9GA0L7RgdC/0LXQutGCINCc0LjRgNCwLCA3MCcsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHByZXNldDogJ2lzbGFuZHMjYmx1ZUNpcmNsZURvdEljb25XaXRoQ2FwdGlvbicsXHJcbiAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICdyZWQnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICksXHJcbiAgICApXHJcbn1cclxuXHJcbiAgICAvLyAvL1xyXG5jb25zdCAkZm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJylcclxuY29uc3QgZm9ybXMgPSBbLi4uJGZvcm1zXVxyXG5cclxuY29uc3QgZmluZEZvcm1CeUlkID0gaWQgPT4ge1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxyXG4gICAgaWYgKCEhZm9ybSkge1xyXG4gICAgICAgIHJldHVybiBmb3JtXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign0KTQvtGA0LzQsCDRgSDRgtCw0LrQuNC8IGlkINC90LUg0L3QsNC50LTQtdC90LAnKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBzdWJtaXRGb3JtID0gZSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZpbmRGb3JtQnlJZChlLnRhcmdldC5pZCkpXHJcblxyXG4gICAgICAgIGZldGNoKCcuL21haWwucGhwJywge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgYm9keTogZm9ybURhdGEsXHJcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiBjb25zb2xlLmxvZyhyZXNwb25zZSkpXHJcblxyXG4gICAgICAgIGNsb3NlTW9kYWwoYCR7JG9wZW5Nb2RhbCAmJiAkb3Blbk1vZGFsLmlkfWApXHJcbiAgICAgICAgZS50YXJnZXQucmVzZXQoKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBpbml0Rm9ybXNIYWRsZXIgPSAoKSA9PiB7XHJcbiAgICBmb3Jtcy5mb3JFYWNoKGZvcm0gPT4ge1xyXG4gICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0Rm9ybSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmluaXRGb3Jtc0hhZGxlcigpXHJcblxyXG5cclxuICAgIGluaXRNZW51T2JzZXJ2ZXIoKVxyXG4gICAgaW5pdE1vZGFsKClcclxufSlcclxuIl19
