"use strict";function s(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e){f.classList[e?"add":"remove"]("_fixed")}function o(e){e=!(!(0<arguments.length&&void 0!==e)||e)||f.classList.contains("_open"),f.classList[e?"remove":"add"]("_open")}function c(){var e,t;window.screen.width<=1201?(r(!1),w.addEventListener("click",o),f.addEventListener("click",function(e){!e.target.closest("[data-menu-exit]")||o(!1)})):(e=a.scrollTop,t=f.classList.contains("_fixed"),500<=e&&!t?r(!0):e<500&&t&&r(!1))}function l(t){return m.find(function(e){return e.id===t})}function u(e,t){if(!e)throw new Error("Такого элемента не существует");p&&p.id!==e.id&&p.classList.remove("_open"),e.classList[t?"add":"remove"]("_open"),p=t?e:void 0}function i(e){u(l(e),!0)}function d(){var e,t;setTimeout(function(){p||i("promo-modal-1")},1e3*(e=25,t=60,Math.random()*(t-e)+e)),m.forEach(function(e){e.addEventListener("click",function(e){!e.target.closest("[data-modal-close]")||u(p,!1)})}),a.addEventListener("click",function(e){e=e.target.closest("[data-open-modal]");!e||i(e.dataset.openModal)})}var p,a=document.querySelector("html"),f=document.querySelector(".header"),w=document.querySelector(".header__toggler"),m=(document.querySelectorAll("[data-menu-exit]"),s(document.querySelectorAll(".modal")));document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".offer__swiper-container.swiper-container")||null,t=document.querySelector(".services__swiper-container.swiper-container")||null,r=document.querySelector(".staff__swiper-container.swiper-container")||null,n=document.querySelector(".portfolio__swiper-container.swiper-container")||null,o=document.querySelector(".promo__swiper-container.swiper-container")||null;e&&new Swiper(".offer__swiper-container",{loop:!0,grabCursor:!0,navigation:{nextEl:".offer__swiper-button-next",prevEl:".offer__swiper-button-prev"},pagination:{el:".offer__swiper-pagination",type:"bullets",clickable:!0},autoplay:{delay:5e3}}),t&&new Swiper(".services__swiper-container",{loop:!1,grabCursor:!0,navigation:{nextEl:".services__swiper-button-next",prevEl:".services__swiper-button-prev"},pagination:{el:".services__swiper-pagination",type:"progressbar"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},899:{slidesPerView:2,spaceBetween:30},1023:{slidesPerView:3,spaceBetween:25}}}),o&&new Swiper(".promo__swiper-container",{loop:!0,spaceBetween:25,grabCursor:!0,centeredSlides:!0,navigation:{nextEl:".promo__swiper-button-next",prevEl:".promo__swiper-button-prev"},breakpoints:{1100:{slidesPerView:"auto",centeredSlides:!0}}}),r&&new Swiper(".staff__swiper-container",{loop:!1,slidesPerView:1,grabCursor:!0,autoHeight:!0,navigation:{nextEl:".staff__swiper-button-next",prevEl:".staff__swiper-button-prev"}}),n&&new Swiper(".portfolio__swiper-container",{loop:!0,spaceBetween:5,grabCursor:!0,breakpoints:{320:{slidesPerView:"auto",centeredSlides:!0},800:{slidesPerView:2},1100:{slidesPerView:"auto",centeredSlides:!0}}}),(document.getElementById("map")||null)&&ymaps.ready(function(){var e=new ymaps.Map("map",{center:[55.788001,37.63437],zoom:19}),t=new ymaps.Placemark([55.788001,37.63518],{balloonContent:'<a target="_blank" href="https://yandex.ru/maps/-/CCUIIHd8KB">Персона Lab BIA. Проспект Мира 70</a>'},{preset:"islands#blueCircleDotIconWithCaption",iconColor:"pink"});e.geoObjects.add(t),t.balloon.open()});function i(e){e.preventDefault();try{var t=new FormData(function(e){e=document.getElementById(e);if(e)return e;throw new Error("Форма с таким id не найдена")}(e.target.id));fetch("./mail.php",{method:"POST",body:t}).then(function(e){return console.log(e)}),t="".concat(p&&p.id),u(l(t),!1),e.target.reset()}catch(e){throw e}}var a=s(document.querySelectorAll("form"));a.forEach(function(e){e.addEventListener("submit",i)}),c(),window.addEventListener("scroll",c),d()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZml4TWVudVRvZ2dsZXIiLCJzdGF0dXMiLCIkaGVhZGVyIiwiY2xhc3NMaXN0IiwibWVudVRvZ2dsZXIiLCJpc01lbnVPcGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY29udGFpbnMiLCJxdWVyeVNlbGVjdG9yIiwiJG1lbnVUb2dnbGVyIiwiZG9jdW1lbnQiLCIkZXhpdE1lbnVFbGVtcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfcmVmIiwidGFyZ2V0IiwiY2xvc2VzdCIsIkhUTUwiLCJ3aW5TY3JvbGwiLCJpc01lbnVGaXhlZCIsImNoZWNrTWVudVdpbmRvd1dpZHRoIiwiZmluZE1vZGFsQnlJZCIsImlkIiwibW9kYWxzIiwiZmluZCIsIm1vZGFsIiwibW9kYWxUb2dnbGVyIiwiJGVsIiwiRXJyb3IiLCIkb3Blbk1vZGFsIiwiZmluZE1vZGFsQnlDbGFzcyIsIm1pbiIsIm1heCIsIm9wZW5Nb2RhbCIsIk1hdGgiLCJmb3JFYWNoIiwiX3JlZjIiLCJfcmVmMyIsImdldFJhbmRvbU51bWJlciIsInRhcmdldENsb3Nlc3RCdXR0b24iLCJpbml0TW9kYWwiLCJkYXRhc2V0IiwicXVlcnlTZWxlY3RvckFsbCIsIl90b0NvbnN1bWFibGVBcnJheSIsIiRvZmZlclNsaWRlciIsImlzQ2xvc2VNb2RhbEVsZW0iLCIkc2VydmljZXNTbGlkZXIiLCIkc3RhZmZTbGlkZXIiLCIkcHJvdGZvbGlvU2xpZGVyIiwiJHByb21vU2xpZGVyIiwiaXNPcGVuTW9kYWxCdXR0b24iLCJTd2lwZXIiLCJsb29wIiwiZ3JhYkN1cnNvciIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJjbGlja2FibGUiLCJvZmZlclNsaWRlciIsImRlbGF5IiwiZWwiLCJ0eXBlIiwiYXV0b3BsYXkiLCJwYWdpbmF0aW9uIiwic2VydmljZXNTbGlkZXIiLCIzMjAiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwicHJldkVsIiwiMTAyMyIsImJyZWFrcG9pbnRzIiwicHJvbW9TbGlkZXIiLCJjZW50ZXJlZFNsaWRlcyIsImF1dG9IZWlnaHQiLCI4MDAiLCIxMTAwIiwiZ2V0RWxlbWVudEJ5SWQiLCJteU1hcCIsInltYXBzIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsInBsYWNlbWFyayIsIlBsYWNlbWFyayIsImJhbGxvb25Db250ZW50IiwicHJlc2V0IiwiaWNvbkNvbG9yIiwiYWRkIiwiYmFsbG9vbiIsIm9wZW4iLCJzdWJtaXRGb3JtIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZm9ybXMiLCJmb3JtIiwiZmluZEZvcm1CeUlkIiwiZmV0Y2giLCJtZXRob2QiLCJmb3JtRGF0YSIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJyZXNldCIsImVycm9yIiwid2luZG93Iiwic2Nyb2xsVG9wIiwiaW5pdEZvcm1zSGFkbGVyIl0sIm1hcHBpbmdzIjoidXZCQU91QixTQUFqQkEsRUFBaUJDLEdBQ25CQyxFQUFRQyxVQUFVRixFQUFTLE1BQVEsVUFBVSxVQUc3QixTQUFkRyxFQUFjLEdBQ1ZDLE1BRDZCLEVBQUFDLFVBQUFDLGFBQUFDLElBQW5CLElBQUEsSUFDWU4sRUFBUUMsVUFBVU0sU0FBUyxTQUN2RFAsRUFBUUMsVUFBV0UsRUFBcUIsU0FBUixPQUFrQixTQVY3QkssU0FBbkJSLElBQ0FTLElBUUlOLEVBQ0VGLEVBVE5RLE9BQUFBLE9BQWVDLE9BQVNGLE1BQ3hCRyxHQUFpQkQsR0FFakJaLEVBQWlCYyxpQkFBakJkLFFBQWlCQyxHQUNuQkMsRUFBUUMsaUJBQW1CLFFBQVEsU0FBQVksSUFBbkNBLEVBQUFDLE9BREpDLFFBQUEscUJBZ0JnQ2IsR0FBWSxPQVhsQ0MsRUFBbUJhLEVBQUdoQixVQUNwQkMsRUFBV0UsRUFBYUYsVUFBUU0sU0FBVSxVQWdCN0IsS0FBYlUsSUFBcUJDLEVBYjNCQyxHQUF1QixHQUNyQkYsRUFBdUIsS0FBTUMsR0FDN0JwQixHQUFBLElBbUJSLFNBQUFzQixFQUFBQyxHQWNJLE9BRGNDLEVBQU9DLEtBQUssU0FBQUMsR0FBSyxPQUFJQSxFQUFNSCxLQUFPQSxJQVMvQixTQUFmSSxFQUFnQkMsRUFBSzNCLEdBZHJCdUIsSUFBQUEsRUFnQkUsTUFBTSxJQUFJSyxNQUFNLGlDQUVoQkMsR0FBY0EsRUFBV1AsS0FBT0ssRUFBSUwsSUFkdENELEVBQWFuQixVQUFibUIsT0FBQUEsU0FDRk0sRUFBQXpCLFVBQUFGLEVBQUEsTUFBQSxVQUFBLFNBQ0E2QixFQUFBN0IsRUFBQTJCLE9BQUFwQixFQUdFdUIsU0FBQUEsRUFBQUEsR0FDRkosRUFBY0gsRUFBWUQsSUFBQUcsR0FRWixTQUFWSSxJQUhNLElBQUFFLEVBQUFDLEVBSU5ILFdBQVczQixXQUNkMkIsR0FxQk9JLEVBQVUsa0JBbEJVMUIsS0FSbEJ3QixFQVFTLEdBUlRDLEVBUVMsR0FQVEUsS0FBSU4sVUFBTUksRUFBQUQsR0FBQUEsSUE2QnBCUixFQUFPWSxRQUFRLFNBQUFWLEdBbkJiUSxFQUFTcEIsaUJBQVRvQixRQUFrQixTQUFBRyxJQUFBQSxFQUFBckIsT0FDcEJDLFFBQUEsdUJBc0JRVSxFQUFhRyxHQUFZLE9BSWpDWixFQUFLSixpQkFBaUIsUUFBUyxTQUFBd0IsR0FuQjdCQyxFQW1CNkNELEVBQWJ0QixPQW5CaEN1QixRQUFrQixzQkFDYkMsR0FHTEMsRUFBWUQsRUFBTUUsUUFBQVIsYUFuRnhCLElBaUNTSixFQWpDSFosRUFBT04sU0FBU0YsY0FBYyxRQUc5QlIsRUFBVVUsU0FBU0YsY0FBYyxXQUNqQ0MsRUFBZUMsU0FBU0YsY0FBYyxvQkF5QnBDYyxHQXhCZVosU0FBUytCLGlCQUFpQixvQkEwQmxDQyxFQURINUMsU0FBYzJDLGlCQUFkLFlBNERSbkIsU0FBT1ksaUJBQVEsbUJBQVMsV0FDNEIsSUFBQVMsRUFDNUNqQyxTQUFNa0MsY0FBZ0IsOENBQXRCLEtBQ0FDLEVBQ0FwQixTQUFBQSxjQUFhRyxpREFDaEIsS0FMTGtCLEVBUUE5QixTQUFLSixjQUFpQiw4Q0FBeUIsS0FBQW1DLEVBQzNDckMsU0FBTTRCLGNBQW1CLGtEQUN6QixLQXFCRlUsRUFuQkV0QyxTQUFJdUMsY0FBbUIsOENBQUEsS0FFdEJOLEdBTkwsSUFBQU8sT0FBQSwyQkFBQSxDQWZKQyxNQUFBLEVBNENRQyxZQUFZLEVBbEJaQyxXQUFDekMsQ0FDTDBDLE9BQUEsNkJBQ0VYLE9BQVksOEJBS1pHLFdBQVksQ0FFWkMsR0FBQUEsNEJBR0FDLEtBQVksVUFjTk8sV0FBVyxHQVZiQyxTQUFBQSxDQUNJQyxNQURpRCxPQUczQ1osR0FJQSxJQUFBSyxPQUFBLDhCQUFBLENBQ1JRLE1BQUksRUFDSkMsWUFBTSxFQUNOSixXQUFXLENBVndDRCxPQUFBLGdDQVl2RE0sT0FBVSxpQ0FBQUMsV0FBQSxDQVpkSCxHQUFBLCtCQWdCSEMsS0FBQSxlQUdTRyxZQUFBQSxDQUNJQyxJQUR1RCxDQUVuREMsY0FGbUQsRUFHbkRDLGFBQUUsSUFFUkMsSUFBUSxDQUxpREYsY0FBQSxFQU9uREMsYUFBRSxJQUVKRSxLQUFFLENBVG1ESCxjQUFBLEVBWTdESSxhQUFhLE9BTUxKLEdBQ2MsSUFBQWQsT0FBQSwyQkFBQSxDQUZiQyxNQUxJLEVBU1RjLGFBQU0sR0FDRkQsWUFBQUEsRUFDQUMsZ0JBQWMsRUFGWlosV0FBQSxDQVRHQyxPQUFBLDZCQVpqQlksT0FBQSw4QkF1Q0lFLFlBQWEsQ0FWakJwQixLQUFKLENBQ1VxQixjQUFrQm5CLE9BQW1Db0IsZ0JBQUEsTUFPbkRKLEdBUG1ELElBQUFoQixPQUFBLDJCQUFBLENBU3ZEa0IsTUFBQUEsRUFDSUosY0FBTSxFQUNGQSxZQUFBQSxFQUNBTSxZQUFBQSxFQUZFakIsV0FBQSxDQURHQyxPQUFBLDZCQVRqQlksT0FBQSxnQ0FvQklmLEdBRHVELElBQUFELE9BQUEsK0JBQUEsQ0FHdkRFLE1BQUFBLEVBQ0FtQixhQUp1RCxFQUt2RGxCLFlBQVksRUFDUkMsWUFBUSxDQUNSWSxJQUFRLENBRkFGLGNBQUEsT0FMaEJNLGdCQUFBLEdBc0JRRSxJQUFLLENBVmJ6QixjQUFrQixHQUVSMEIsS0FEeUQsQ0FFL0RSLGNBRitELE9BR3JESyxnQkFIcUQsT0FJbEQ1RCxTQUFBZ0UsZUFBQSxRQUFBLE9BVUxKLE1BQUFBLE1BZHVELFdBb0JuRSxJQUFBSyxFQUFBLElBQUFDLE1BQUFDLElBQUEsTUFBQSxDQVVJQyxPQUFRLENBQUMsVUFBVyxVQUNwQkMsS0FBTSxLQVBkQyxFQUFVLElBQUFKLE1BQUFLLFVBQ05MLENBQUssVUFBTCxVQUNILENBV1dNLGVBVFosdUdBRVFKLENBQ01LLE9BQUEsdUNBRlZDLFVBQUEsU0FZUUQsRUFBQUEsV0FBUUUsSUFBQUwsR0FEWkEsRUFOSk0sUUFBQUMsU0EwQmM1RCxTQUFWNkQsRUFBVTdELEdBQ2I4RCxFQUFBQyxpQkFNRCxJQUhFRixJQUFBQSxFQUFhLElBQWJBLFNBVGUsU0FBQW5FLEdBRmZzRSxFQUFLakYsU0FBQWdFLGVBQVhyRCxHQUlJLEdBQU11RSxFQUZKQyxPQUFBQSxFQUtFLE1BQU0sSUFBSWxFLE1BQU0sK0JBSUxrRSxDQUFLSixFQUFBM0UsT0FBQU8sS0FNaEJ5RSxNQUFNLGFBQWMsQ0FIcEJDLE9BQUEsT0FDTUMsS0FBUUEsSUFFVEMsS0FBQyxTQUFBQyxHQUFELE9BQWVDLFFBQUFDLElBQUFGLEtBNU54QjdFLEVBOE5jMkUsR0FBQUEsT0FBQUEsR0FBQUEsRUFBQUEsSUFoT2xCdkUsRUFBQUwsRUFBQUMsSUFBQSxHQThOUW9FLEVBR0dRLE9BQUtJLFFBQVEsTUFBQUMsR0FIaEIsTUFBQUEsR0FsQlIsSUFDTVgsRUFBS2pELEVBREloQyxTQUFTK0IsaUJBQWlCLFNBMkJwQ2tELEVBQUF6RCxRQUFBLFNBQUEwRCxHQWZMQSxFQUFBaEYsaUJBQUEsU0FBQTRFLEtBN1BJckUsSUFTSW9GLE9BQU10RixpQkFBaUJ1RixTQUF2QnJGLEdBNFFSc0YiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEhUTUwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJylcclxuXHJcbi8vIC8vIC0tLSDQkdCb0J7QmiDQk9Cb0JDQktCd0J7Qk9CeINCc0JXQndCuIC0tLVxyXG5jb25zdCAkaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpXHJcbmNvbnN0ICRtZW51VG9nZ2xlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX3RvZ2dsZXInKVxyXG5jb25zdCAkZXhpdE1lbnVFbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1lbnUtZXhpdF0nKVxyXG5cclxuY29uc3QgZml4TWVudVRvZ2dsZXIgPSBzdGF0dXMgPT4ge1xyXG4gICAgJGhlYWRlci5jbGFzc0xpc3Rbc3RhdHVzID8gJ2FkZCcgOiAncmVtb3ZlJ10oJ19maXhlZCcpXHJcbn1cclxuXHJcbmNvbnN0IG1lbnVUb2dnbGVyID0gKHN0YXR1cyA9IHRydWUpID0+IHtcclxuICAgIGNvbnN0IGlzTWVudU9wZW4gPSBzdGF0dXMgPyAkaGVhZGVyLmNsYXNzTGlzdC5jb250YWlucygnX29wZW4nKSA6IHRydWVcclxuICAgICRoZWFkZXIuY2xhc3NMaXN0WyFpc01lbnVPcGVuID8gJ2FkZCcgOiAncmVtb3ZlJ10oJ19vcGVuJylcclxufVxyXG5cclxuY29uc3QgY2hlY2tNZW51V2luZG93V2lkdGggPSAoKSA9PiB7XHJcbiAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8PSAxMjAxKSB7XHJcbiAgICAgICAgZml4TWVudVRvZ2dsZXIoZmFsc2UpXHJcblxyXG4gICAgICAgICRtZW51VG9nZ2xlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1lbnVUb2dnbGVyKVxyXG4gICAgICAgICRoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoeyB0YXJnZXQgfSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc01lbnVFeGl0RWxlbSA9ICEhdGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLW1lbnUtZXhpdF0nKVxyXG4gICAgICAgICAgICBpZiAoaXNNZW51RXhpdEVsZW0pIG1lbnVUb2dnbGVyKGZhbHNlKVxyXG4gICAgICAgIH0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHdpblNjcm9sbCA9IEhUTUwuc2Nyb2xsVG9wXHJcbiAgICAgICAgY29uc3QgaXNNZW51Rml4ZWQgPSAkaGVhZGVyLmNsYXNzTGlzdC5jb250YWlucygnX2ZpeGVkJylcclxuXHJcbiAgICAgICAgaWYgKHdpblNjcm9sbCA+PSA1MDAgJiYgIWlzTWVudUZpeGVkKSB7XHJcbiAgICAgICAgICAgIGZpeE1lbnVUb2dnbGVyKHRydWUpXHJcbiAgICAgICAgfSBlbHNlIGlmICh3aW5TY3JvbGwgPCA1MDAgJiYgaXNNZW51Rml4ZWQpIHtcclxuICAgICAgICAgICAgZml4TWVudVRvZ2dsZXIoZmFsc2UpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRj1xyXG5jb25zdCBpbml0TWVudU9ic2VydmVyID0gKCkgPT4ge1xyXG4gICAgY2hlY2tNZW51V2luZG93V2lkdGgoKVxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNoZWNrTWVudVdpbmRvd1dpZHRoKVxyXG59XHJcblxyXG4vLyAvL1xyXG5jb25zdCAkbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsJylcclxuY29uc3QgbW9kYWxzID0gWy4uLiRtb2RhbHNdXHJcblxyXG5sZXQgJG9wZW5Nb2RhbFxyXG5cclxuY29uc3QgZmluZE1vZGFsQnlJZCA9IGlkID0+IHtcclxuICAgIGNvbnN0IG1vZGFsID0gbW9kYWxzLmZpbmQobW9kYWwgPT4gbW9kYWwuaWQgPT09IGlkKVxyXG4gICAgcmV0dXJuIG1vZGFsXHJcbn1cclxuXHJcbmNvbnN0IGZpbmRNb2RhbEJ5Q2xhc3MgPSBjbGFzc05hbWUgPT4ge1xyXG4gICAgY29uc3QgbW9kYWwgPSBtb2RhbHMuZmluZChtb2RhbCA9PiBtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSlcclxuICAgIHJldHVybiBtb2RhbFxyXG59XHJcblxyXG5jb25zdCBtb2RhbFRvZ2dsZXIgPSAoJGVsLCBzdGF0dXMpID0+IHtcclxuICAgIGlmICghJGVsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfQotCw0LrQvtCz0L4g0Y3Qu9C10LzQtdC90YLQsCDQvdC1INGB0YPRidC10YHRgtCy0YPQtdGCJylcclxuICAgIH1cclxuICAgIGlmICgkb3Blbk1vZGFsICYmICRvcGVuTW9kYWwuaWQgIT09ICRlbC5pZCkge1xyXG4gICAgICAgICRvcGVuTW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnX29wZW4nKVxyXG4gICAgfVxyXG5cclxuICAgICRlbC5jbGFzc0xpc3Rbc3RhdHVzID8gJ2FkZCcgOiAncmVtb3ZlJ10oJ19vcGVuJylcclxuICAgICRvcGVuTW9kYWwgPSBzdGF0dXMgPyAkZWwgOiB1bmRlZmluZWRcclxufVxyXG5cclxuY29uc3Qgb3Blbk1vZGFsID0gaWQgPT4ge1xyXG4gICAgbW9kYWxUb2dnbGVyKGZpbmRNb2RhbEJ5SWQoaWQpLCB0cnVlKVxyXG59XHJcblxyXG5jb25zdCBjbG9zZU1vZGFsID0gaWQgPT4ge1xyXG4gICAgbW9kYWxUb2dnbGVyKGZpbmRNb2RhbEJ5SWQoaWQpLCBmYWxzZSlcclxufVxyXG5cclxuY29uc3QgZ2V0UmFuZG9tTnVtYmVyID0gKG1pbiwgbWF4KSA9PiB7XHJcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluXHJcbn1cclxuXHJcbmNvbnN0IGluaXRNb2RhbCA9ICgpID0+IHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGlmICghJG9wZW5Nb2RhbCkge1xyXG4gICAgICAgICAgICBvcGVuTW9kYWwoJ3Byb21vLW1vZGFsLTEnKVxyXG4gICAgICAgIH1cclxuICAgIH0sIGdldFJhbmRvbU51bWJlcigyNSwgNjApICogMTAwMClcclxuXHJcbiAgICBtb2RhbHMuZm9yRWFjaChtb2RhbCA9PiB7XHJcbiAgICAgICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoeyB0YXJnZXQgfSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc0Nsb3NlTW9kYWxFbGVtID0gISF0YXJnZXQuY2xvc2VzdCgnW2RhdGEtbW9kYWwtY2xvc2VdJylcclxuICAgICAgICAgICAgaWYgKCFpc0Nsb3NlTW9kYWxFbGVtKSByZXR1cm5cclxuICAgICAgICAgICAgbW9kYWxUb2dnbGVyKCRvcGVuTW9kYWwsIGZhbHNlKVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIEhUTUwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoeyB0YXJnZXQgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldENsb3Nlc3RCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnW2RhdGEtb3Blbi1tb2RhbF0nKVxyXG4gICAgICAgIGNvbnN0IGlzT3Blbk1vZGFsQnV0dG9uID0gISF0YXJnZXRDbG9zZXN0QnV0dG9uXHJcblxyXG4gICAgICAgIGlmIChpc09wZW5Nb2RhbEJ1dHRvbikge1xyXG4gICAgICAgICAgICBvcGVuTW9kYWwodGFyZ2V0Q2xvc2VzdEJ1dHRvbi5kYXRhc2V0Lm9wZW5Nb2RhbClcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuICAgIC8vIC8vXHJcbmNvbnN0ICRvZmZlclNsaWRlciA9XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub2ZmZXJfX3N3aXBlci1jb250YWluZXIuc3dpcGVyLWNvbnRhaW5lcicpIHx8IG51bGxcclxuY29uc3QgJHNlcnZpY2VzU2xpZGVyID1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlc19fc3dpcGVyLWNvbnRhaW5lci5zd2lwZXItY29udGFpbmVyJykgfHxcclxuICAgIG51bGxcclxuY29uc3QgJHN0YWZmU2xpZGVyID1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFmZl9fc3dpcGVyLWNvbnRhaW5lci5zd2lwZXItY29udGFpbmVyJykgfHwgbnVsbFxyXG5jb25zdCAkcHJvdGZvbGlvU2xpZGVyID1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3J0Zm9saW9fX3N3aXBlci1jb250YWluZXIuc3dpcGVyLWNvbnRhaW5lcicpIHx8XHJcbiAgICBudWxsXHJcbmNvbnN0ICRwcm9tb1NsaWRlciA9XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvbW9fX3N3aXBlci1jb250YWluZXIuc3dpcGVyLWNvbnRhaW5lcicpIHx8IG51bGxcclxuXHJcbmlmICgkb2ZmZXJTbGlkZXIpIHtcclxuICAgIGNvbnN0IG9mZmVyU2xpZGVyID0gbmV3IFN3aXBlcignLm9mZmVyX19zd2lwZXItY29udGFpbmVyJywge1xyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgZ3JhYkN1cnNvcjogdHJ1ZSxcclxuICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgIG5leHRFbDogJy5vZmZlcl9fc3dpcGVyLWJ1dHRvbi1uZXh0JyxcclxuICAgICAgICAgICAgcHJldkVsOiAnLm9mZmVyX19zd2lwZXItYnV0dG9uLXByZXYnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICBlbDogJy5vZmZlcl9fc3dpcGVyLXBhZ2luYXRpb24nLFxyXG4gICAgICAgICAgICB0eXBlOiAnYnVsbGV0cycsXHJcbiAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGF1dG9wbGF5OiB7XHJcbiAgICAgICAgICAgIGRlbGF5OiA1MDAwLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59XHJcblxyXG5pZiAoJHNlcnZpY2VzU2xpZGVyKSB7XHJcbiAgICBjb25zdCBzZXJ2aWNlc1NsaWRlciA9IG5ldyBTd2lwZXIoJy5zZXJ2aWNlc19fc3dpcGVyLWNvbnRhaW5lcicsIHtcclxuICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICBncmFiQ3Vyc29yOiB0cnVlLFxyXG4gICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgbmV4dEVsOiAnLnNlcnZpY2VzX19zd2lwZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICAgICAgICBwcmV2RWw6ICcuc2VydmljZXNfX3N3aXBlci1idXR0b24tcHJldicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgIGVsOiAnLnNlcnZpY2VzX19zd2lwZXItcGFnaW5hdGlvbicsXHJcbiAgICAgICAgICAgIHR5cGU6ICdwcm9ncmVzc2JhcicsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgMzIwOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgODk5OiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTAyMzoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmlmICgkcHJvbW9TbGlkZXIpIHtcclxuICAgIGNvbnN0IHByb21vU2xpZGVyID0gbmV3IFN3aXBlcignLnByb21vX19zd2lwZXItY29udGFpbmVyJywge1xyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNSxcclxuICAgICAgICBncmFiQ3Vyc29yOiB0cnVlLFxyXG4gICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgbmV4dEVsOiAnLnByb21vX19zd2lwZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICAgICAgICBwcmV2RWw6ICcucHJvbW9fX3N3aXBlci1idXR0b24tcHJldicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICAxMTAwOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfSlcclxufVxyXG5cclxuaWYgKCRzdGFmZlNsaWRlcikge1xyXG4gICAgY29uc3Qgc3RhZmZTbGlkZXIgPSBuZXcgU3dpcGVyKCcuc3RhZmZfX3N3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICBncmFiQ3Vyc29yOiB0cnVlLFxyXG4gICAgICAgIGF1dG9IZWlnaHQ6IHRydWUsXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICBuZXh0RWw6ICcuc3RhZmZfX3N3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgICAgICAgICAgIHByZXZFbDogJy5zdGFmZl9fc3dpcGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgfSlcclxufVxyXG5cclxuaWYgKCRwcm90Zm9saW9TbGlkZXIpIHtcclxuICAgIGNvbnN0IHByb3Rmb2xpb1NsaWRlciA9IG5ldyBTd2lwZXIoJy5wb3J0Zm9saW9fX3N3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDUsXHJcbiAgICAgICAgZ3JhYkN1cnNvcjogdHJ1ZSxcclxuICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICAzMjA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA4MDA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDExMDA6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59XHJcblxyXG4gICAgLy8gLy9cclxuXHJcbmNvbnN0ICRtYXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJykgfHwgbnVsbFxyXG5cclxuaWYgKCRtYXApIHtcclxuICAgIHltYXBzLnJlYWR5KGluaXQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICBjb25zdCBteU1hcCA9IG5ldyB5bWFwcy5NYXAoJ21hcCcsIHtcclxuICAgICAgICBjZW50ZXI6IFs1NS43ODgwMDEsIDM3LjYzNDM3XSxcclxuICAgICAgICB6b29tOiAxOSxcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgcGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhcclxuICAgICAgICBbNTUuNzg4MDAxLCAzNy42MzUxOF0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYWxsb29uQ29udGVudDpcclxuICAgICAgICAgICAgICAgICc8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cHM6Ly95YW5kZXgucnUvbWFwcy8tL0NDVUlJSGQ4S0JcIj7Qn9C10YDRgdC+0L3QsCBMYWIgQklBLiDQn9GA0L7RgdC/0LXQutGCINCc0LjRgNCwIDcwPC9hPicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHByZXNldDogJ2lzbGFuZHMjYmx1ZUNpcmNsZURvdEljb25XaXRoQ2FwdGlvbicsXHJcbiAgICAgICAgICAgIGljb25Db2xvcjogJ3BpbmsnLFxyXG4gICAgICAgIH0sXHJcbiAgICApXHJcblxyXG4gICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQocGxhY2VtYXJrKVxyXG5cclxuICAgIHBsYWNlbWFyay5iYWxsb29uLm9wZW4oKVxyXG59XHJcblxyXG4gICAgLy8gLy9cclxuY29uc3QgJGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXHJcbmNvbnN0IGZvcm1zID0gWy4uLiRmb3Jtc11cclxuXHJcbmNvbnN0IGZpbmRGb3JtQnlJZCA9IGlkID0+IHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcclxuICAgIGlmICghIWZvcm0pIHtcclxuICAgICAgICByZXR1cm4gZm9ybVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9Ck0L7RgNC80LAg0YEg0YLQsNC60LjQvCBpZCDQvdC1INC90LDQudC00LXQvdCwJylcclxuICAgIH1cclxufVxyXG5cclxuY29uc3Qgc3VibWl0Rm9ybSA9IGUgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmaW5kRm9ybUJ5SWQoZS50YXJnZXQuaWQpKVxyXG5cclxuICAgICAgICBmZXRjaCgnLi9tYWlsLnBocCcsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxyXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gY29uc29sZS5sb2cocmVzcG9uc2UpKVxyXG5cclxuICAgICAgICBjbG9zZU1vZGFsKGAkeyRvcGVuTW9kYWwgJiYgJG9wZW5Nb2RhbC5pZH1gKVxyXG4gICAgICAgIGUudGFyZ2V0LnJlc2V0KClcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgaW5pdEZvcm1zSGFkbGVyID0gKCkgPT4ge1xyXG4gICAgZm9ybXMuZm9yRWFjaChmb3JtID0+IHtcclxuICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5pbml0Rm9ybXNIYWRsZXIoKVxyXG5cclxuXHJcbiAgICBpbml0TWVudU9ic2VydmVyKClcclxuICAgIGluaXRNb2RhbCgpXHJcbn0pXHJcbiJdfQ==
